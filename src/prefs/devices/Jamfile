SubDir OBOS_TOP src prefs devices ;

AddResources Devices : Devices.rdef ;

rule ISAPnPHeaderGen
{
	SetupObjectsDir ;

	SEARCH on $(2) = $(SEARCH_SOURCE) ;
	SEARCH on $(3) = $(SEARCH_SOURCE) ;

	Depends $(1) : $(2) $(3) ;
	MakeLocate $(<) : $(LOCATE_TARGET) ;
	ISAPnPHeaderGen1 $(1) : $(2) $(3) ;
	LocalClean clean : $(<) ;
}

actions ISAPnPHeaderGen1
{
	grep '^PNP[[:xdigit:]][[:xdigit:]][[:xdigit:]][[:xdigit:]] '  $(2[1]) | awk -f $(2[2]) > $(1) ;
}

ISAPnPHeaderGen [ FGristFiles isapnpids.h ] : isapnp_devids.txt : devlist2h.awk ;

Preference Devices :
	Devices.cpp
	DevicesWindow.cpp
	ResourceUsageWindow.cpp
	ModemWindow.cpp
	cm_wrapper.c
	DevicesInfo.cpp
	ConfigurationWindow.cpp
	: be
;

Includes [ FGristFiles DevicesInfo.cpp ] : [ FGristFiles isapnpids.h ] ;
