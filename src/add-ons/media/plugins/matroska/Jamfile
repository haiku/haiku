SubDir HAIKU_TOP src add-ons media plugins matroska ;

SetSubDirSupportedPlatformsBeOSCompatible ;

UsePrivateHeaders media ;

# SubDirHdrs [ FDirName $(SUBDIR) libmatroska ] ;
SubDirHdrs [ FDirName $(SUBDIR) libMatroskaParser ] ;
SubDirSysHdrs [ FDirName $(SUBDIR) $(DOTDOT) ogg libogg ] ;

local r5_src = strlcpy.c ;

if $(HAIKU_COMPATIBLE) {
	r5_src = ;
}

Addon matroska : media plugins :
	matroska_codecs.cpp
	matroska_reader.cpp
	matroska_util.cpp
	$(r5_src)
	:
	false
	:
#	libebml.a
#	libmatroska.a
	libMatroskaParser.a
	libz.a
	libmedia.so
;

if $(HAIKU_COMPATIBLE) {
	LinkAgainst matroska : libbe.so libroot.so ;
} else {
	LinkAgainst matroska : be ;
}

SEARCH on [ FGristFiles
                strlcpy.c
        ] = [ FDirName $(HAIKU_TOP) src system libroot posix string ] ;

# SubInclude HAIKU_TOP src add-ons media plugins matroska libebml ;
# SubInclude HAIKU_TOP src add-ons media plugins matroska libmatroska ;
SubInclude HAIKU_TOP src add-ons media plugins matroska libMatroskaParser ;
